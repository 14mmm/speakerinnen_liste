<div class="full-width-container speakerin">
  <div class="full-width-row">
    <div class="backlink"><%= link_to(t(:link_to_all, scope: "profiles"), profiles_path) %></div>

    <% if current_profile == @profile && mode == :edit %>
      <div class="main-action">
        <a href="#blank" class="tiny"><%= t(:reset, scope: "profiles.speakerin") %></a>
        <a href="#blank" class="btn btn-primary"><%= t(:save, scope: "profiles.speakerin") %></a>
      </div>
    <% end %>

    <div class="profile-box">
      <h1 class="text-center"><%= @profile.fullname %></h1>

      <div class="row">
        <div class="col-md-7 col-sm-12 col-xs-12">
          <% if current_profile == @profile && mode == :edit %>
            <div class="group">
              <label><%= t(:firstname, scope: "profiles.speakerin") %></label>
              <%= fields[:firstname].html_safe %>
            </div>
            <div class="group">
              <label><%= t(:lastname, scope: "profiles.speakerin") %></label>
              <%= fields[:lastname].html_safe %>
            </div>
          <% else %>
            <div class="group">
              <label><%= t(:main_topic, scope: "profiles.speakerin") %></label>
              <%= fields[:main_topic].html_safe %>
            </div>
          <% end %>

          <div class="group">
            <label><%= t(:languages, scope: "profiles.speakerin") %></label>
            <%= fields[:languages].html_safe %>
          </div>
          <div class="group">
            <label><%= t(:city_region, scope: "profiles.speakerin") %></label>
            <%= fields[:city].html_safe %>
          </div>
          <div class="group">
            <label><%= t(:twitter, scope: "profiles.speakerin") %></label>
            <%= fields[:twitter].html_safe %>
          </div>
          <div class="group">
            <label><%= t(:website, scope: "profiles.speakerin") %></label>
            <%= fields[:website].html_safe %>
          </div>

          <% if current_profile != @profile %>
            <a data-toggle="modal" href="#contact" class="btn btn-default btn-large buttons-modals aligned-to-infos">
              <span class="glyphicon glyphicon-envelope"></span>
              <%= t(:contact, scope: "profiles.speakerin").gsub!('%{recipient}', @profile.fullname) %>
            </a>
          <% else %>
            <h2><%= t(:private_details, scope: "profiles.speakerin") %></h2>
            <div class="group">
              <label><%= t(:email, scope: "profiles.speakerin") %></label>
              <%= fields[:email].html_safe %>
            </div>
          <% end %>
        </div>
        <div class="col-md-5 col-sm-12 col-xs-12">
          <div class="group text-center">
            <% if @profile.picture.present? %>
              <%= image_tag(@profile.picture.profile.url , class: "photo") %>
            <% else %>
              <%= image_tag("avatar.jpg", alt: "avatar", class: "photo") %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <div class="profile-box">
      <h2>Speakerinnen-Bio</h2>
      <div class="content"><%= simple_format(@profile.bio) %></div>
    </div>

    <div class="profile-box">
      <h2><%= t(:topics, scope: "profiles.speakerin") %></h2>
      <div class="block-content">
        <h3><%= t(:main_topic, scope: "profiles.speakerin") %></h3>
        <%= fields[:topics_main_topic].html_safe %>
        <%
          add_comma = false
          other_topics = ''
          @profile.topic_list.each do |topic|
            if topic != @profile.main_topic_or_first_topic
              if add_comma
                other_topics = other_topics + ' ,'
              end
              other_topics = other_topics + topic
              add_comma = true
            end
          end
        %>
        <% if other_topics.length > 0 %>
          <h3><%= t(:more_topics, scope: "profiles.speakerin") %></h3>
          <p>
            <%= other_topics %>
          </p>
        <% end %>
      </div>
    </div>

    <% if @profile.medialinks.any? %>
    <div class="profile-box">
      <h2><%= t(:medialinks, scope: "profiles.speakerin") %></h2>
        <ul>
          <% @medialinks.each do |medialink| %>
          <li>
            <p class="medialink"><%= medialink.title %></p>
            <%= medialink.url_html %>
            <%= medialink.description %>
          </li>
          <hr>
          <% end %>
        </ul>
    </div>
    <% end %>

    <% if current_profile == @profile && mode == :edit %>
      <div class="main-action">
        <a href="#blank" class="btn btn-primary"><%= t(:save, scope: "profiles.speakerin") %></a>
        <a href="#blank" class="tiny"><%= t(:reset, scope: "profiles.speakerin") %></a>
      </div>
    <% end %>

  </div>
</div>
